<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Small write-up about Discord&#39;s telemetry on it&#39;s WebSocket connection.'><title>Discord&#39;s Telemetry on WebSocket Connect</title>

<link rel='canonical' href='https://honk.camp/p/discords-telemetry-on-websocket-connect/'>

<link rel="stylesheet" href="/scss/style.min.css"><meta property='og:title' content='Discord&#39;s Telemetry on WebSocket Connect'>
<meta property='og:description' content='Small write-up about Discord&#39;s telemetry on it&#39;s WebSocket connection.'>
<meta property='og:url' content='https://honk.camp/p/discords-telemetry-on-websocket-connect/'>
<meta property='og:site_name' content='honk.camp'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='discord' /><meta property='article:published_time' content='2020-12-13T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2020-12-13T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="Discord&#39;s Telemetry on WebSocket Connect">
<meta name="twitter:description" content="Small write-up about Discord&#39;s telemetry on it&#39;s WebSocket connection.">
    </head>
    <body class="">
        <div class="container flex on-phone--column align-items--flex-start extended article-page with-toolbar">
            <aside class="sidebar left-sidebar sticky">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header class="site-info">
        
            <figure class="site-avatar">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu09708bc55717c97a187e664e56a836fc_1890324_300x0_resize_box_2.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                

                
            </figure>
        
        <h1 class="site-name"><a href="https://honk.camp">honk.camp</a></h1>
        <h2 class="site-description">Web security researcher</h2>
    </header>

    <ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        

        <li >
            <a href='/about'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
    </ol>
</aside>

            <main class="main full-width">
    <div id="article-toolbar">
        <a href="https://honk.camp" class="back-home">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



            <span>Back</span>
        </a>
    </div>

    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            
                <a href="/categories/writeup/">writeup</a>
            
        
            
                <a href="/categories/telemetry/">telemetry</a>
            
        
    </header>
    

    <h2 class="article-title">
        <a href="/p/discords-telemetry-on-websocket-connect/">Discord&#39;s Telemetry on WebSocket Connect</a>
    </h2>

    
    <h3 class="article-subtitle">
        Small write-up about Discord&#39;s telemetry on it&#39;s WebSocket connection.
    </h3>
    <footer class="article-time">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <time class="article-time--published">Dec 13, 2020</time>
    </footer></div>
</header>

    <section class="article-content">
    <h2 id="intro">Intro</h2>
<p><a class="link" href="https://discord.com"  target="_blank" rel="noopener"
    >Discord</a> uses a WebSocket for communication between their servers and it&rsquo;s web client. I decided to look into it to see if it has any telemetry with their desktop client (even a tiny amount); it does.</p>
<h2 id="the-websocket">The WebSocket</h2>
<h3 id="websocket-intro">WebSocket Intro</h3>
<p>WebSockets are great for using low bandwidth / data and fast communication, as it is event-driven and can easily support compressed and small messages. They are primarily used in the web, but can also be used server-side for some things.</p>
<h3 id="gateway">Gateway</h3>
<p>Discord call their WebSocket their &ldquo;gateway&rdquo;, hosted on <code>gateway.discord.gg</code>. It is used primarily for actions which require speed so it would be ineffective to use their HTTP REST API. Primarily, it looks like it is used to recieving messages. It is connected with some query parameters, for example:</p>
<pre><code>wss://gateway.discord.gg/?encoding=etf&amp;v=8&amp;compress=zlib-stream
</code></pre><h2 id="the-telemetry">The Telemetry</h2>
<h3 id="overview">Overview</h3>
<p>On connection of the WebSocket in Discord&rsquo;s desktop app, it sends a collection of information about the user&rsquo;s OS setup. Below is an example of the telemetry on my current setup.</p>
<h3 id="hex-view">Hex View</h3>
<p><img src="https://pbs.twimg.com/media/Ens0SofW8AEsS-E?format=png&amp;name=small" alt="A view of the message in a Hex Editor"  /></p>
<p>(That hex editor is <a class="link" href="https://github.com/WerWolv/ImHex"  target="_blank" rel="noopener"
    >ImHex by WerWolv</a> by the way)</p>
<h3 id="simplified-view">Simplified View</h3>
<pre><code>properties:
os Linux
browser Discord Client
release_channel canary
client_version 00115
os_version 599-zen1-1-zen
os_arch x64
window_manager i3,i3
distro &quot;Arch Linux&quot;

presence:
status online

activities:
afks false
compress false
</code></pre><h2 id="adapted-from-a-twitter-threadhttpstwittercomojoojmedstatus1331695740394086400"><a class="link" href="https://twitter.com/OjOojmed/status/1331695740394086400"  target="_blank" rel="noopener"
    >Adapted from a Twitter thread</a></h2>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/discord/">discord</a>
        
    </section>


    </footer>

    
</article>

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title">Related contents</h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="">
    <a href="/p/gooseupdate-v3-codebase-design/">
        
        

        <div class="article-details">
            <h2 class="article-title">GooseUpdate v3 Codebase Design</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/malware-promotion-via-fake-forums/">
        
        

        <div class="article-details">
            <h2 class="article-title">Malware Promotion via Fake Forums</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/electrum-malware-campaign/">
        
        

        <div class="article-details">
            <h2 class="article-title">Electrum Malware Campaign</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>


    
        
    

    <footer class="site-footer">
    <section class="copyright">&copy; 2021 honk.camp</section>
    <section class="powerby">Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="1.1.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true" style="display:none">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
            </main>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"
    integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin="anonymous"></script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
<link rel="stylesheet" href="/css/highlight/dark.min.css">

    </body>
</html>
